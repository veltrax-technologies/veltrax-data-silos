<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Veltrax | From Data Silos to Unified Intelligence</title>
    <meta name="description" content="Simulator contrasting siloed cloud architectures with the Veltrax unified, local AI pipeline. Clear panels, readable sources, and simple flows to show why one model wins." />

    <!-- Tailwind (CDN build) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              vx: {
                bg: "#0f1115",
                surface: "#171a24",
                surfaceAlt: "#1d2230",
                text: "#EEF0F5",
                muted: "#A1A8B7",
                border: "#2C3240",
                accent: "#6F42C1",
                good: "#22c55e",
                warn: "#f59e0b",
                bad: "#ef4444",
              },
            },
            animation: {
              fadeInUp: "fadeInUp .4s ease-out both",
            },
            keyframes: {
              fadeInUp: {
                "0%": { opacity: 0, transform: "translateY(10px)" },
                "100%": { opacity: 1, transform: "translateY(0)" },
              },
            },
            boxShadow: {
              vx: "0 10px 30px rgba(0,0,0,.35)",
            },
          },
        },
      };
    </script>

    <style>
      .panel-active { opacity: 1; filter: none; box-shadow: 0 0 0 1px rgba(111,66,193,.35) inset, 0 0 24px rgba(111,66,193,.12); }
      .panel-inactive { opacity: .45; filter: grayscale(.2) saturate(.7); }
      svg text { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial; }
      .badge { border:1px solid var(--b, #2C3240); background: var(--bg, #1d2230); padding:.4rem .6rem; border-radius:.5rem; font-size:.75rem; }
    </style>
  </head>
  <body class="bg-vx-bg text-vx-text selection:bg-vx-accent/30 selection:text-white">
    <!-- ─────────────────────────── 1) HERO ─────────────────────────── -->
    <header class="relative overflow-hidden border-b border-vx-border/70 bg-gradient-to-b from-black/40 to-vx-bg">
      <div class="absolute inset-0 pointer-events-none" style="background: radial-gradient(1200px 420px at 50% -10%, rgba(111,66,193,.22), transparent 60%);"></div>
      <div class="max-w-7xl mx-auto px-6 md:px-10 py-16 md:py-22">
        <div class="flex items-center gap-3 opacity-90">
          <svg width="36" height="36" viewBox="0 0 64 64" fill="none" class="shrink-0">
            <rect x="6" y="10" width="52" height="12" rx="6" fill="white" />
            <rect x="6" y="30" width="42" height="12" rx="6" fill="white" />
            <rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1" />
          </svg>
          <span class="tracking-widest text-xs text-vx-muted">VELTRAX</span>
        </div>
        <h1 class="mt-6 text-3xl md:text-5xl font-semibold leading-tight">From Data Silos to Unified Intelligence — Powered by Veltrax</h1>
        <p class="mt-4 text-vx-muted max-w-3xl">Unify every source into one secure, local model. See how the architecture flips from fragmented risk to real‑time decisions.</p>

        <!-- Mode + Product Selector -->
        <div class="mt-8 flex flex-wrap items-center gap-3">
          <button id="modeCloud" class="px-4 py-2 rounded-xl border border-vx-border bg-vx-surface shadow-sm hover:border-vx-accent/50 transition">Cloud Providers</button>
          <button id="modeUnified" class="px-4 py-2 rounded-xl border border-vx-accent bg-vx-accent text-white shadow-vx">Veltrax Unified</button>
          <span class="text-vx-muted text-sm">Click to focus a panel. Both detailed sections are below.</span>
        </div>

        <div class="mt-5 flex flex-wrap items-center gap-2">
          <span class="text-sm text-vx-muted mr-2">Preset:</span>
          <button data-product="finex" class="vx-prod px-3 py-1.5 rounded-lg border border-vx-accent/60 text-sm bg-vx-accent/20">Finex (Banking)</button>
          <button data-product="echelon" class="vx-prod px-3 py-1.5 rounded-lg border border-vx-border text-sm">Échelon (Retail)</button>
          <button data-product="verdict" class="vx-prod px-3 py-1.5 rounded-lg border border-vx-border text-sm">Verdict (Legal)</button>
        </div>
      </div>
    </header>

    <!-- ─────────────────────────── 2) CONTROLS + METRICS ─────────────────────────── -->
    <section class="max-w-7xl mx-auto px-6 md:px-10 mt-10 grid grid-cols-1 lg:grid-cols-12 gap-8">
      <div class="lg:col-span-5">
        <div class="rounded-2xl border border-vx-border bg-vx-surface shadow-sm">
          <div class="p-6 border-b border-vx-border/60">
            <h2 class="text-xl font-semibold">Data Source Selector</h2>
            <p class="text-sm text-vx-muted mt-1">Pick sources for the selected product. Veltrax will normalize them to a unified model.</p>
          </div>
          <div class="p-4 space-y-3" id="sourceList"></div>
          <div class="p-4 pt-0">
            <div class="p-4 rounded-xl bg-vx-surfaceAlt border border-vx-border/70">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-vx-muted">Daily volume multiplier</span>
                <span class="text-sm" id="volumeLabel">1.0×</span>
              </div>
              <input id="volume" type="range" min="0.5" max="5" step="0.1" value="1" class="w-full" />
              <p class="text-xs text-vx-muted mt-2">Simulates more or fewer events per day across selected sources.</p>
            </div>
          </div>
        </div>

        <div id="why" class="mt-6 rounded-2xl border border-vx-border bg-vx-surface/70 p-6 hidden">
          <h3 class="font-semibold">Why this matters</h3>
          <ul class="mt-2 text-sm text-vx-muted list-disc list-inside space-y-1">
            <li>Runs on your hardware. Private. No cloud dependency.</li>
            <li>All data, one source of truth. AI‑ready from day one.</li>
            <li>Unified schema reduces integration cost and latency.</li>
          </ul>
        </div>
      </div>

      <div class="lg:col-span-7">
        <div class="rounded-2xl border border-vx-border bg-vx-surface shadow-sm">
          <div class="p-6 border-b border-vx-border/60">
            <h2 class="text-xl font-semibold">Processing Speed & Efficiency</h2>
            <p class="text-sm text-vx-muted mt-1">Updates with your product preset, sources, and volume.</p>
          </div>
          <div class="p-4 grid grid-cols-2 md:grid-cols-4 gap-4" id="metrics"></div>
          <div class="px-4 pb-4 text-xs text-vx-muted"><span class="opacity-80">Note:</span> Simulated metrics illustrate the relative impact of a unified schema vs siloed feeds.</div>
        </div>
      </div>
    </section>

    <!-- ─────────────────────────── 3) DETAILED ARCHITECTURES ─────────────────────────── -->
    <section class="max-w-7xl mx-auto px-6 md:px-10 mt-10 space-y-10" id="archSections">
      <!-- 3.1 Cloud / Siloed -->
      <div id="sectionCloud" class="rounded-2xl border border-vx-border bg-vx-surface shadow-sm panel-inactive">
        <div class="p-6 border-b border-vx-border/60 flex items-center justify-between">
          <div>
            <h2 class="text-xl font-semibold">Cloud / On‑prem Silos — Limited Oversight</h2>
            <p class="text-sm text-vx-muted">Same sources split into vendor silos. Multiple lines into Corporate create blind spots, latency, and duplicated cost.</p>
          </div>
          <button class="px-3 py-1.5 rounded-lg border border-vx-border text-sm hover:border-vx-accent/60" onclick="setMode('cloud')">Focus this view</button>
        </div>
        <div class="p-6 space-y-4">
          <div class="rounded-xl border border-vx-border/70 bg-vx-surfaceAlt p-4">
            <svg viewBox="0 0 1024 300" class="w-full">
              <!-- Sources (left) -->
              <g id="cloudSources"></g>
              <!-- Vendor Silos (middle, separate) -->
              <g id="cloudSilos"></g>
              <!-- Corporate target (right) -->
              <g id="cloudCorp"></g>
              <!-- Lines -->
              <g id="cloudLines"></g>
            </svg>
            <div class="mt-3 flex gap-3 text-xs text-vx-muted flex-wrap">
              <span class="badge" style="--bg:#1f2937;--b:#374151">External cloud</span>
              <span class="badge" style="--bg:#1f2028;--b:#4b5563">No shared model</span>
              <span class="badge" style="--bg:#2a1b1b;--b:#7f1d1d">Duplicate ETL</span>
            </div>
          </div>
        </div>
      </div>

      <!-- 3.2 Veltrax Unified -->
      <div id="sectionUnified" class="rounded-2xl border border-vx-border bg-vx-surface shadow-sm panel-active">
        <div class="p-6 border-b border-vx-border/60 flex items-center justify-between">
          <div>
            <h2 class="text-xl font-semibold">Veltrax Unified — One Model, Real‑time Decisions</h2>
            <p class="text-sm text-vx-muted">All sources → Veltrax (local & safe) → single lane to Corporate. One schema, consistent metrics, fast AI.</p>
          </div>
          <button class="px-3 py-1.5 rounded-lg border border-vx-border text-sm hover:border-vx-accent/60" onclick="setMode('unified')">Focus this view</button>
        </div>
        <div class="p-6 space-y-4">
          <div class="rounded-xl border border-vx-border/70 bg-vx-surfaceAlt p-4">
            <svg viewBox="0 0 1024 300" class="w-full">
              <!-- Sources (left) -->
              <g id="uniSources"></g>
              <!-- Veltrax box (middle) -->
              <g id="uniVeltrax"></g>
              <!-- Corporate target (right) -->
              <g id="uniCorp"></g>
              <!-- Lines -->
              <g id="uniLines"></g>
            </svg>
            <div class="mt-3 flex gap-3 text-xs text-vx-muted flex-wrap">
              <span class="badge" style="--bg:#13211f;--b:#1f5c49">Local & safe</span>
              <span class="badge" style="--bg:#171a24;--b:#6F42C1">Unified schema</span>
              <span class="badge" style="--bg:#142016;--b:#14532d">Single lane to HQ</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ─────────────────────────── 4) FOOTER ─────────────────────────── -->
    <footer class="border-t border-vx-border/70 py-10 mt-10">
      <div class="max-w-7xl mx-auto px-6 md:px-10 flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
        <div>
          <div class="flex items-center gap-3">
            <svg width="28" height="28" viewBox="0 0 64 64" fill="none" class="shrink-0">
              <rect x="6" y="10" width="52" height="12" rx="6" fill="white" />
              <rect x="6" y="30" width="42" height="12" rx="6" fill="white" />
              <rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1" />
            </svg>
            <span class="tracking-widest text-xs text-vx-muted">VELTRAX</span>
          </div>
          <p class="text-sm text-vx-muted mt-3 max-w-xl">Local‑first. Private by default. Built for operators who need provable ROI.</p>
          <a class="text-vx-accent hover:underline mt-2 block" href="https://www.linkedin.com/company/veltrax-technologies/?viewAsMember=true" target="_blank" rel="noopener">Connect with us on LinkedIn</a>
        </div>
      </div>
    </footer>

    <!-- ─────────────────────────── 5) SCRIPT ─────────────────────────── -->
    <script>
      // ── 1) Product presets (unchanged labels, used for sources list)
      const PRESETS = {
        finex: {
          name: 'Finex (Banking)',
          sources: [
            { key: 'core',  name: 'Core Banking (Jack Henry, FIS, Fiserv)', baseRps: 420, roi: 2.0 },
            { key: 'loans', name: 'Loan Systems (nCino, custom LOS)',       baseRps: 160, roi: 1.5 },
            { key: 'cards', name: 'Cards & Payments (ISO8583, RTP, ACH)',   baseRps: 300, roi: 1.6 },
            { key: 'crm',   name: 'CRM (Salesforce)',                        baseRps: 120, roi: 1.1 },
            { key: 'files', name: 'CSV / Excel / SFTP drops',                baseRps: 90,  roi: 0.9 },
          ],
          ulabels: ['Customers/Accounts','Transactions','Operations','Risk / KPI'],
          plabels: ['KPIs','Fraud Engine','Reports','APIs']
        },
        echelon: {
          name: 'Échelon (Retail)',
          sources: [
            { key: 'pos',       name: 'POS / ERP (NCR, Oracle, Lightspeed)', baseRps: 320, roi: 1.6 },
            { key: 'inventory', name: 'Inventory / WMS',                     baseRps: 180, roi: 1.3 },
            { key: 'ecom',      name: 'E‑commerce (Shopify, Magento)',       baseRps: 220, roi: 1.4 },
            { key: 'crm',       name: 'CRM / Loyalty',                       baseRps: 140, roi: 1.1 },
            { key: 'files',     name: 'CSV / Excel / Local DB',              baseRps: 80,  roi: 0.9 },
          ],
          ulabels: ['Products/Stores','Sales/Orders','Ops/Staffing','Shrink / KPI'],
          plabels: ['KPIs','Demand AI','Reports','Action API']
        },
        verdict: {
          name: 'Verdict (Legal)',
          sources: [
            { key: 'dms',     name: 'Doc Mgmt (iManage, NetDocs)', baseRps: 160, roi: 1.2 },
            { key: 'ecf',     name: 'Court Filings (ECF/PACER)',    baseRps: 110, roi: 1.3 },
            { key: 'billing', name: 'Billing / Timekeeping',        baseRps: 130, roi: 1.1 },
            { key: 'crm',     name: 'CRM / Matters',                baseRps: 100, roi: 1.0 },
            { key: 'files',   name: 'PDF / Email / Local DB',       baseRps: 70,  roi: 0.9 },
          ],
          ulabels: ['Clients/Matters','Docs/Exhibits','Deadlines','Risk / KPI'],
          plabels: ['Case KPIs','LLM','Reports','Hooks']
        },
      };

      // ── 2) Pipeline model
      const PIPELINES = { cloud:{ eff:.42, batchLatency:1800, aiLatency:480 }, unified:{ eff:.88, batchLatency:600, aiLatency:120 } };
      const DOLLAR_PER_1K_ROWS = 4.2, ROI_MULTIPLIER = 1.0;

      // ── 3) State + refs
      const state = { mode:'unified', volume:1.0, product:'finex', enabled:new Set() };
      const $modeCloud = document.getElementById('modeCloud');
      const $modeUnified = document.getElementById('modeUnified');
      const $sourceList = document.getElementById('sourceList');
      const $metrics = document.getElementById('metrics');
      const $why = document.getElementById('why');
      const $sectionCloud = document.getElementById('sectionCloud');
      const $sectionUnified = document.getElementById('sectionUnified');
      const $volume = document.getElementById('volume');
      const $volumeLabel = document.getElementById('volumeLabel');

      // Cloud SVG groups
      const $cloudSources = ()=>document.getElementById('cloudSources');
      const $cloudSilos   = ()=>document.getElementById('cloudSilos');
      const $cloudCorp    = ()=>document.getElementById('cloudCorp');
      const $cloudLines   = ()=>document.getElementById('cloudLines');
      // Unified SVG groups
      const $uniSources   = ()=>document.getElementById('uniSources');
      const $uniVeltrax   = ()=>document.getElementById('uniVeltrax');
      const $uniCorp      = ()=>document.getElementById('uniCorp');
      const $uniLines     = ()=>document.getElementById('uniLines');

      // ── Helpers
      function activePreset(){ return PRESETS[state.product]; }
      function setMode(m){ state.mode=m; applyFocus(); buildMetrics(calcTotals()); pushUrl(); }
      function pushUrl(){ const u=new URL(location.href); u.searchParams.set('product',state.product); u.searchParams.set('mode',state.mode); history.replaceState(null,'',u.toString()); }
      function readUrl(){ const u=new URL(location.href); const p=u.searchParams.get('product'); const m=u.searchParams.get('mode'); if(p&&PRESETS[p]) state.product=p; if(m&&(m==='cloud'||m==='unified')) state.mode=m; }

      // ── UI builders
      function buildSources(){
        const box = document.createElement('div'); box.className='space-y-3';
        state.enabled = new Set(activePreset().sources.map(s=>s.key));
        activePreset().sources.forEach(s=>{
          const row = document.createElement('div');
          row.className='flex items-center justify-between rounded-xl border border-vx-border/70 bg-vx-surfaceAlt px-3 py-2';
          row.innerHTML = `
            <label class="flex items-center gap-3">
              <input type="checkbox" data-key="${s.key}" checked class="h-4 w-4 accent-[#6F42C1]" />
              <span>${s.name}</span>
            </label>
            <span class="text-xs text-vx-muted">~${s.baseRps.toLocaleString()} rows/s</span>`;
          row.querySelector('input').addEventListener('change', e=>{
            const k = e.target.getAttribute('data-key');
            if(e.target.checked) state.enabled.add(k); else state.enabled.delete(k);
            renderDiagrams(); buildMetrics(calcTotals()); pushUrl();
          });
          box.appendChild(row);
        });
        $sourceList.innerHTML=''; $sourceList.appendChild(box);
      }

      function buildMetrics({ rps, batchLatency, aiLatency, dailyROI }){
        $metrics.innerHTML = '';
        const items = [
          { label: 'Throughput', value: `${Math.round(rps).toLocaleString()} rows/sec` },
          { label: 'Batch latency', value: `${Math.round(batchLatency)} ms` },
          { label: 'AI decision latency', value: `${Math.round(aiLatency)} ms` },
          { label: 'Projected daily ROI', value: `$${Math.round(dailyROI).toLocaleString()}` },
        ];
        items.forEach(m=>{
          const card=document.createElement('div');
          card.className='rounded-xl border border-vx-border/70 bg-vx-surfaceAlt p-4';
          card.innerHTML=`<div class="text-xs text-vx-muted">${m.label}</div><div class="mt-1 text-xl font-semibold">${m.value}</div>`;
          $metrics.appendChild(card);
        });
      }

      function calcTotals(){
        const cfg = PIPELINES[state.mode];
        const act = activePreset().sources.filter(s=>state.enabled.has(s.key));
        const baseRps = act.reduce((n,s)=>n+s.baseRps,0);
        const rps = baseRps * state.volume * cfg.eff;
        const aiLatency = cfg.aiLatency * (1/cfg.eff);
        const batchLatency = cfg.batchLatency * (1/cfg.eff);
        const rowsPerDay = rps * 86400;
        const roiFactor = act.reduce((a,s)=>a+s.roi,0)/Math.max(act.length,1);
        const dailyROI = (rowsPerDay/1000) * DOLLAR_PER_1K_ROWS * roiFactor * cfg.eff * ROI_MULTIPLIER;
        return { rps, batchLatency, aiLatency, dailyROI };
      }

      // ── Diagrams
      function drawCloud(){
        const preset = activePreset();
        const srcG=$cloudSources(), siloG=$cloudSilos(), corpG=$cloudCorp(), lineG=$cloudLines();
        srcG.innerHTML=siloG.innerHTML=corpG.innerHTML=lineG.innerHTML='';

        // positions
        const srcX=40, siloX=420, corpX=860; const startY=40, h=40, gap=20;
        const act = preset.sources.filter(s=>state.enabled.has(s.key));
        // Sources
        act.forEach((s,i)=>{
          const y=startY+i*(h+gap);
          rectLabel(srcG, srcX, y, 280, h, '#0b1220', '#5b6b8c', s.name);
          // Silo per source
          rectLabel(siloG, siloX, y, 200, h, '#201316', '#7f1d1d', vendorName(s.key));
          // Lines (red, many) to Corporate
          line(lineG, siloX+200, y+h/2, corpX, 80 + (i*22)%180, '#ef4444');
        });
        // Corporate (multiple ports)
        building(corpG, corpX, 60, 120, 160, '#1f2937', '#94a3b8', 'Corporate HQ');
      }

      function drawUnified(){
        const preset = activePreset();
        const srcG=$uniSources(), vG=$uniVeltrax(), corpG=$uniCorp(), lineG=$uniLines();
        srcG.innerHTML=vG.innerHTML=corpG.innerHTML=lineG.innerHTML='';

        const srcX=40, vX=450, corpX=880; const startY=40, h=40, gap=20;
        const act = preset.sources.filter(s=>state.enabled.has(s.key));
        // Sources → Veltrax (green lines)
        act.forEach((s,i)=>{
          const y=startY+i*(h+gap);
          rectLabel(srcG, srcX, y, 280, h, '#0b1220', '#5b6b8c', s.name);
          line(lineG, srcX+280, y+h/2, vX, 120, '#6F42C1');
        });
        // Veltrax box (local & safe)
        rectLabel(vG, vX-40, 100, 220, 100, '#10191a', '#14532d', 'Veltrax (Local)');
        shield(vG, vX-65, 120, 18, '#16a34a');
        // Single lane to Corporate (thick green)
        thickLine(lineG, vX+180, 150, corpX, 150, '#22c55e');
        building(corpG, corpX-20, 100, 120, 100, '#1f2937', '#94a3b8', 'Corporate HQ');
      }

      function rectLabel(g,x,y,w,h,fill,stroke,label){
        const r = svg('rect',{x,y,width:w,height:h,rx:10,fill,stroke}); g.appendChild(r);
        const t = svg('text',{x:x+w/2,y:y+h/2+4,fill:'#dbe4ff','text-anchor':'middle','font-size':12}); t.textContent=label; g.appendChild(t);
      }
      function line(g,x1,y1,x2,y2,stroke){ const l=svg('line',{x1,y1,x2,y2,stroke,'stroke-width':2}); g.appendChild(l); }
      function thickLine(g,x1,y1,x2,y2,stroke){ const l=svg('line',{x1,y1,x2,y2,stroke,'stroke-width':6}); g.appendChild(l); }
      function building(g,x,y,w,h,fill,stroke,label){
        const r=svg('rect',{x,y,width:w,height:h,rx:6,fill,stroke}); g.appendChild(r);
        for(let i=0;i<3;i++){ for(let j=0;j<4;j++){ g.appendChild(svg('rect',{x:x+14+j*26,y:y+14+i*26,width:16,height:16,fill:stroke,opacity:.35,rx:2})); }}
        const t=svg('text',{x:x+w/2,y:y+h+18,fill:'#A1A8B7','text-anchor':'middle','font-size':12}); t.textContent=label; g.appendChild(t);
      }
      function shield(g,x,y,r,c){ const p=svg('path',{d:`M ${x} ${y} l ${r} -10 l ${r} 10 v ${r} l -${r} 8 l -${r} -8 z`, fill:c, opacity:.9}); g.appendChild(p); }
      function vendorName(k){
        const map={ core:'AWS / Azure / GCP', loans:'SaaS LOS', cards:'Payments Cloud', crm:'CRM Cloud', files:'Ad‑hoc SFTP' , pos:'POS Cloud', inventory:'WMS Cloud', ecom:'E‑com Cloud', dms:'DMS Cloud', ecf:'ECF', billing:'Billing SaaS' };
        return map[k]||'Vendor Cloud';
      }
      function svg(tag,attrs){ const el=document.createElementNS('http://www.w3.org/2000/svg',tag); Object.entries(attrs).forEach(([k,v])=>el.setAttribute(k,v)); return el; }

      function applyFocus(){
        if(state.mode==='cloud'){
          $sectionCloud.classList.remove('panel-inactive'); $sectionCloud.classList.add('panel-active');
          $sectionUnified.classList.remove('panel-active'); $sectionUnified.classList.add('panel-inactive');
          $modeCloud.className='px-4 py-2 rounded-xl border border-vx-accent bg-vx-accent text-white shadow-vx';
          $modeUnified.className='px-4 py-2 rounded-xl border border-vx-border bg-vx-surface shadow-sm hover:border-vx-accent/50 transition';
          $why.classList.add('hidden');
        } else {
          $sectionUnified.classList.remove('panel-inactive'); $sectionUnified.classList.add('panel-active');
          $sectionCloud.classList.remove('panel-active'); $sectionCloud.classList.add('panel-inactive');
          $modeUnified.className='px-4 py-2 rounded-xl border border-vx-accent bg-vx-accent text-white shadow-vx';
          $modeCloud.className='px-4 py-2 rounded-xl border border-vx-border bg-vx-surface shadow-sm hover:border-vx-accent/50 transition';
          $why.classList.remove('hidden');
        }
      }

      function renderDiagrams(){ drawCloud(); drawUnified(); }

      // ── Init
      function bindProductButtons(){
        document.querySelectorAll('.vx-prod').forEach(btn=>{
          btn.addEventListener('click', ()=>{
            document.querySelectorAll('.vx-prod').forEach(b=>b.className='vx-prod px-3 py-1.5 rounded-lg border border-vx-border text-sm');
            btn.className='vx-prod px-3 py-1.5 rounded-lg border border-vx-accent/60 text-sm bg-vx-accent/20';
            state.product = btn.getAttribute('data-product');
            buildSources(); renderDiagrams(); buildMetrics(calcTotals()); pushUrl();
          });
        });
      }

      function init(){
        readUrl();
        bindProductButtons();
        buildSources();
        $modeCloud.addEventListener('click', ()=> setMode('cloud'));
        $modeUnified.addEventListener('click', ()=> setMode('unified'));
        $volume.addEventListener('input', e=>{ state.volume=parseFloat(e.target.value); $volumeLabel.textContent=`${state.volume.toFixed(1)}×`; buildMetrics(calcTotals()); });
        applyFocus(); renderDiagrams(); buildMetrics(calcTotals()); pushUrl();
      }
      document.addEventListener('DOMContentLoaded', init);
    </script>
  </body>
</html>
