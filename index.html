<!--
  Veltrax — Silos vs Unified Simulator (Full Demo)
  - Product presets: Finex (Banking), Échelon (Retail), Verdict (Legal)
  - Source toggles + volume slider
  - Live metrics: throughput, batch latency, AI latency, projected ROI
  - URL presets: ?product=finex|echelon|verdict&mode=cloud|unified
  - Two detailed SVG panels with dynamic lines — Cloud vs Unified
  - NO tooltips / NO screenshot button (per request)
  - Clean straight lines, nothing cut off; lines auto‑align on resize
  - Accessible, keyboard-friendly
  - Single-file for GitHub Pages
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ─────────────────────────── 1) META & TOKENS ─────────────────────────── -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Veltrax — From Data Silos to Unified Intelligence</title>

    <style>
      /* ── 1.1) Color Tokens (Veltrax UI Spec v2) */
      :root {
        --vx-primary: #4c8dff;
        --vx-bg: #131417;
        --vx-surface: #1b1d23;
        --vx-surface-2: #20232b;
        --vx-border: #2c2f36;
        --vx-text: #e6e7eb;
        --vx-muted: #7f8696;
        --vx-danger: #ff453a;
        --vx-good: #4cff88;
        --vx-ring: rgba(76, 141, 255, 0.45);
      }

      /* ── 1.2) Resets */
      *, *::before, *::after { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
        background: radial-gradient(1000px 400px at 50% -200px, rgba(111,66,193,.25), transparent 60%) , var(--vx-bg);
        color: var(--vx-text);
      }
      a { color: var(--vx-primary); text-decoration: none; }
      a:hover { text-decoration: underline; }
      button { font: inherit; color: inherit; background: none; border: none; cursor: pointer; }
      input[type="range"] { width: 100%; }

      /* ── 1.3) Utilities */
      .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
      .row { display: grid; gap: 16px; }
      @media (min-width: 900px){ .row.cols-2 { grid-template-columns: 1fr 1fr; } }
      .card {
        background: linear-gradient(180deg, var(--vx-surface), var(--vx-surface-2));
        border: 1px solid var(--vx-border);
        border-radius: 16px; padding: 20px; box-shadow: 0 1px 0 rgba(0,0,0,.25);
      }
      .muted { color: var(--vx-muted); }
      .kpi { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      .pill { display:inline-flex; align-items:center; gap:8px; border:1px solid var(--vx-border); padding:6px 10px; border-radius:999px; background: #181a21; }
      .pill.active { border-color: var(--vx-primary); box-shadow: 0 0 0 3px var(--vx-ring); }
      .btn {
        display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px;
        border:1px solid var(--vx-border); background:#16181f; transition: 120ms ease-out;
      }
      .btn:hover { border-color: var(--vx-primary); box-shadow: 0 0 0 3px var(--vx-ring); }
      .btn.primary { background: var(--vx-primary); color: #0d1424; border-color: transparent; }
      .btn.tabu { background:#191c23; color: var(--vx-muted); }

      /* ── 1.4) Hero */
      .hero { padding: 36px 0 8px; }
      .hero h1 { font-size: 40px; line-height: 1.15; margin: 8px 0 6px; }
      .hero p { color: var(--vx-muted); }

      /* ── 1.5) Data Source checklist */
      .source-list { display:flex; flex-direction:column; gap:10px; }
      .source-item { display:flex; align-items:center; justify-content:space-between; gap:14px; background:#171a21; padding:10px 12px; border-radius:12px; border:1px solid var(--vx-border); }
      .source-item label { display:flex; align-items:center; gap:10px; cursor:pointer; }
      .badge { color: var(--vx-muted); font-size:12px; }

      /* ── 1.6) KPIs */
      .kpi-grid { display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; }
      @media (max-width: 900px){ .kpi-grid { grid-template-columns:1fr; } }
      .kpi-card { background:#16181f; border:1px solid var(--vx-border); border-radius:12px; padding:14px; }
      .kpi-label { color: var(--vx-muted); font-size:12px; margin-bottom:6px; }
      .kpi-value { font-size:18px; font-weight:600; }

      /* ── 1.7) Dual architecture panels */
      .dual { display:grid; gap:16px; }
      @media (min-width: 1100px){ .dual { grid-template-columns: 1fr 1fr; } }
      .panel { position:relative; }
      .panel header { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
      .panel header h3 { margin:0; font-size:16px; }
      .stage { position:relative; background: #0f1219; border:1px solid var(--vx-border); border-radius:16px; height:420px; padding:20px; overflow:hidden; }
      .legend { display:flex; gap:10px; position:absolute; bottom:14px; left:16px; font-size:11px; color:var(--vx-muted); }
      .legend .dot { width:10px; height:10px; border-radius:50%.stage svg { position:absolute; inset:0; pointer-events:none; overflow:visible; z-index:0; }
/* keep nodes above the lines */
.stage .row-top, .stage .row-mid, .stage .row-bottom, .stage .chip { position: relative; z-index: 1; }:0; pointer-events:none; overflow:visible; z-index:0; }
/* keep nodes above the lines */
.stage .row-top, .stage .row-mid, .stage .row-bottom, .stage .chip { position: relative; z-index: 1; }
/* keep nodes above the lines */
      .overlay { position:absolute; z-index:2; }

      /* ── 1.8) Blocks & labels inside SVG areas */
      .chip { padding:8px 12px; border-radius:10px; border:1px solid var(--vx-border); background:#161a22; }
      .chip.light { background:#1b1f27; color:#cfd2da; }
      .chip.bad { border-color: rgba(255,69,58,.5); }
      .chip.good { border-color: rgba(76,255,136,.5); }

      /* ── 1.9) Footer */
      footer { border-top:1px solid var(--vx-border); margin-top:40px; padding:24px 0 48px; color:var(--vx-muted); }

      /* ── 1.10) Visually hidden (a11y) */
      .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    </style>
  </head>

  <body>
    <!-- ─────────────────────────── 2) HERO & CONTROLS ─────────────────────────── -->
    <header class="container hero">
      <div style="display:flex; align-items:center; gap:10px;">
        <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true">
          <rect x="6" y="10" width="52" height="12" rx="6" fill="#ffffff" />
          <rect x="6" y="30" width="42" height="12" rx="6" fill="#ffffff" />
          <rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1" />
        </svg>
        <span class="muted" style="letter-spacing:.2em; font-size:11px;">VELTRAX</span>
      </div>
      <h1>From Data Silos to Unified Intelligence — Powered by Veltrax</h1>
      <p>Unify every source into one secure, local model. See how the architecture flips from fragmented risk to real-time decisions.</p>

      <div class="row" style="margin-top:12px; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;">
        <div>
          <div role="tablist" aria-label="View">
            <button id="tab-cloud" class="btn tabu" data-mode="cloud" role="tab" aria-selected="false">Cloud Providers</button>
            <button id="tab-unified" class="btn" data-mode="unified" role="tab" aria-selected="true" style="margin-left:6px;">Veltrax Unified</button>
          </div>
          <div class="muted" style="font-size:12px; margin-top:6px;">Click to focus a panel. Both detailed sections are below.</div>
        </div>

        <div style="justify-self:center; display:flex; gap:8px; align-items:center;">
          <span class="muted" style="font-size:12px;">Preset:</span>
          <button class="pill" data-preset="finex">Finex (Banking)</button>
          <button class="pill" data-preset="echelon">Échelon (Retail)</button>
          <button class="pill" data-preset="verdict">Verdict (Legal)</button>
        </div>

        <div style="justify-self:end; display:flex; align-items:center; gap:10px;">
          <span class="muted" style="font-size:12px;">Share state</span>
          <button id="copy-url" class="btn">Copy link</button>
        </div>
      </div>
    </header>

    <!-- ─────────────────────────── 3) SOURCE PANEL + METRICS ─────────────────────────── -->
    <main class="container row cols-2" style="margin-top:20px; align-items:start;">
      <!-- 3.1 Sources -->
      <section class="card" aria-labelledby="sources-title">
        <h2 id="sources-title" style="margin:0 0 8px; font-size:16px;">Data Source Selector</h2>
        <p class="muted" style="margin-top:2px; font-size:12px;">Pick sources for the selected product. Veltrax will normalize them to a unified model.</p>

        <div class="source-list" id="source-list"><!-- populated by JS --></div>

        <div style="margin-top:12px;">
          <label for="vol" class="muted" style="display:block; font-size:12px; margin-bottom:6px;">Daily volume multiplier</label>
          <input id="vol" type="range" min="0.5" max="5" step="0.1" value="3" />
          <div class="muted" style="font-size:11px;">Simulates more or fewer events per day across selected sources.</div>
        </div>

        <div class="card" style="margin-top:14px;">
          <h3 style="margin:0 0 8px; font-size:14px;">Why this matters</h3>
          <ul style="margin:0; padding-left:18px; color:var(--vx-muted); font-size:13px;">
            <li>Runs on your hardware. Private. No cloud dependency.</li>
            <li>All data, one source of truth. AI‑ready from day one.</li>
            <li>Unified schema reduces integration cost and latency.</li>
          </ul>
        </div>
      </section>

      <!-- 3.2 Metrics + quick facts fill -->
      <section class="card" aria-labelledby="metrics-title">
        <h2 id="metrics-title" style="margin:0 0 8px; font-size:16px;">Processing Speed & Efficiency</h2>
        <p class="muted" style="margin-top:2px; font-size:12px;">Updates with your product preset, sources, and volume.</p>
        <div class="kpi-grid" style="margin-top:10px;">
          <div class="kpi-card">
            <div class="kpi-label">Throughput</div>
            <div id="kpi-throughput" class="kpi kpi-value">—</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Batch latency</div>
            <div id="kpi-batch" class="kpi kpi-value">—</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">AI decision latency</div>
            <div id="kpi-ai" class="kpi kpi-value">—</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Projected daily ROI</div>
            <div id="kpi-roi" class="kpi kpi-value">—</div>
          </div>
        </div>
        <div class="card" style="margin-top:14px;">
          <strong style="font-size:13px;">Unified vs siloed snapshot</strong>
          <ul style="margin:6px 0 0; padding-left:18px; color:var(--vx-muted); font-size:13px;">
            <li>Unified cuts duplicate ETL and streamlines governance.</li>
            <li>Single schema drives consistent KPIs across teams.</li>
            <li>Local processing keeps sensitive data off third‑party clouds.</li>
          </ul>
        </div>
        <div class="muted" style="font-size:11px; margin-top:10px;">Note: Simulated metrics illustrate the relative impact of a unified schema vs siloed feeds.</div>
      </section>
    </main>

    <!-- ─────────────────────────── 4) ARCHITECTURE PANELS ─────────────────────────── -->
    <section class="container" style="margin-top:24px;">
      <div class="dual">
        <!-- 4.1 Cloud / Siloed -->
        <article id="panel-cloud" class="panel card" aria-labelledby="cloud-title">
          <header>
            <h3 id="cloud-title">Cloud / On‑prem Silos — Limited Oversight</h3>
            <button class="btn" data-focus="cloud">Focus this view</button>
          </header>
          <div class="stage" id="stage-cloud" aria-hidden="false">
            <!-- SVG lines (behind) -->
            <svg id="svg-cloud"></svg>

            <!-- Left column sources -->
            <div class="overlay" style="left:20px; top:24px; display:flex; flex-direction:column; gap:14px;">
              <div class="chip light" id="cloud-src-core">Core Banking</div>
              <div class="chip light" id="cloud-src-loan">Loan Systems</div>
              <div class="chip light" id="cloud-src-cards">Cards & Payments</div>
              <div class="chip light" id="cloud-src-crm">CRM</div>
              <div class="chip light" id="cloud-src-csv">CSV / Excel / SFTP drops</div>
            </div>
            <!-- Middle vendor silos -->
            <div class="overlay" style="left:50%; transform:translateX(-50%); top:42px; display:flex; flex-direction:column; gap:26px; width:240px; align-items:center;">
              <div class="chip bad" style="width:160px; text-align:center;" id="cloud-silo-1">AWS / Azure / GCP</div>
              <div class="chip bad" style="width:160px; text-align:center;" id="cloud-silo-2">SaaS LOS</div>
              <div class="chip bad" style="width:160px; text-align:center;" id="cloud-silo-3">Payments Cloud</div>
              <div class="chip bad" style="width:160px; text-align:center;" id="cloud-silo-4">CRM Cloud</div>
              <div class="chip bad" style="width:160px; text-align:center;" id="cloud-silo-5">Ad‑hoc ETL</div>
            </div>
            <!-- Right Corporate HQ -->
            <div class="overlay" style="right:24px; top:110px;">
              <div class="chip bad" style="width:160px; text-align:center; border-color: rgba(255,69,58,.8);" id="cloud-hq">Corporate HQ</div>
            </div>

            <!-- Cloud badges -->
            <div class="legend overlay">
              <span class="chip bad">External cloud</span>
              <span class="chip">No shared model</span>
              <span class="chip bad">Duplicate ETL</span>
            </div>
          </div>
        </article>

        <!-- 4.2 Unified -->
        <article id="panel-unified" class="panel card" aria-labelledby="unified-title">
          <header>
            <h3 id="unified-title">Veltrax Unified — One Model, Real‑time Decisions</h3>
            <button class="btn" data-focus="unified">Focus this view</button>
          </header>
          <div class="stage" id="stage-unified" aria-hidden="false">
            <!-- SVG lines (behind) -->
            <svg id="svg-unified"></svg>

            <!-- Left column sources (same labels for contrast) -->
            <div class="overlay" style="left:20px; top:24px; display:flex; flex-direction:column; gap:14px;">
              <div class="chip light" id="uni-src-core">Core Banking</div>
              <div class="chip light" id="uni-src-loan">Loan Systems</div>
              <div class="chip light" id="uni-src-cards">Cards & Payments</div>
              <div class="chip light" id="uni-src-crm">CRM</div>
              <div class="chip light" id="uni-src-csv">CSV / Excel / SFTP drops</div>
            </div>

            <!-- Center: Veltrax (local & safe) -->
            <div class="overlay" style="left:50%; transform:translateX(-50%); top:120px; display:flex; align-items:center; gap:10px;" id="uni-veltrax-wrap">
              <div style="width:18px; height:18px; background:var(--vx-good); border-radius:50%; box-shadow: 0 0 0 6px rgba(76,255,136,.15);"></div>
              <div class="chip good" style="width:180px; text-align:center;" id="uni-veltrax">Veltrax (local)</div>
            </div>

            <!-- Right: single lane to HQ -->
            <div class="overlay" style="right:24px; top:146px;">
              <div class="chip good" style="width:160px; text-align:center; border-color: rgba(76,255,136,.85);" id="uni-hq">Corporate HQ</div>
            </div>

            <div class="legend overlay">
              <span class="chip good">Unified stream</span>
              <span class="chip">Source connectors</span>
              <span class="chip good">Validated → products</span>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- ─────────────────────────── 5) FOOTER ─────────────────────────── -->
    <footer>
      <div class="container" style="display:flex; justify-content:space-between; gap:16px; flex-wrap:wrap;">
        <div style="display:flex; align-items:center; gap:10px;">
          <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true">
            <rect x="6" y="10" width="52" height="12" rx="6" fill="#ffffff" />
            <rect x="6" y="30" width="42" height="12" rx="6" fill="#ffffff" />
            <rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1" />
          </svg>
          <span class="muted" style="letter-spacing:.2em; font-size:11px;">VELTRAX</span>
    const PRESETS = {
        finex: {
          name: 'Finex (Banking)',
          sources: [
            { id: 'core-banking', label: 'Core Banking (Jack Henry, FIS, Fiserv)', base: 420 },
            { id: 'loan-systems', label: 'Loan Systems (nCino, custom LOS)', base: 160 },
            { id: 'cards', label: 'Cards & Payments (ISO8583, RTP, ACH)', base: 300 },
            { id: 'crm', label: 'CRM (Salesforce)', base: 120 },
            { id: 'csv', label: 'CSV / Excel / SFTP drops', base: 90 },
          ],
          batchMs: 680, aiMs: 140,
          roiFactor: 22,   // normalized revenue/benefit per 1 row/sec
          uplift: 0.28,     // unified decisioning + faster inference
          vendorDaily: 3500 // daily savings per eliminated cloud vendor
        },
        echelon: {
          name: 'Échelon (Retail)',
          sources: [
            { id: 'pos', label: 'POS / ERP (NCR, Oracle, custom)', base: 520 },
            { id: 'ecomm', label: 'E‑commerce (Shopify, SFCC)', base: 280 },
            { id: 'inventory', label: 'Inventory / WMS', base: 260 },
            { id: 'crm', label: 'CRM / CDP', base: 150 },
            { id: 'csv', label: 'CSV / Excel / SFTP drops', base: 110 },
          ],
          batchMs: 720, aiMs: 160,
          roiFactor: 18,
          uplift: 0.22,
          vendorDaily: 3000
        },
        verdict: {
          name: 'Verdict (Legal)',
          sources: [
            { id: 'dms', label: 'Document Mgmt (iManage, NetDocs)', base: 210 },
            { id: 'billing', label: 'Billing / Timekeeping', base: 140 },
            { id: 'email', label: 'Email / Communications', base: 180 },
            { id: 'crm', label: 'CRM / Matters', base: 120 },
            { id: 'csv', label: 'CSV / Excel / SFTP drops', base: 60 },
          ],
          batchMs: 760, aiMs: 180,
          roiFactor: 12,
          uplift: 0.15,
          vendorDaily: 2000
        }
      }; label: 'POS / ERP (NCR, Oracle, custom)', base: 520 },
            { id: 'ecomm', label: 'E‑commerce (Shopify, SFCC)', base: 280 },
            { id: 'inventory', label: 'Inventory / WMS', base: 260 },
            { id: 'crm', label: 'CRM / CDP', base: 150 },
            { id: 'csv', label: 'CSV / Excel / SFTP drops', base: 110 },
          ],
          batchMs: 720, aiMs: 160,
          roiFactor: 18,
          uplift: 0.22,
          vendorDaily: 3000
        },
        verdict: {
          name: 'Verdict (Legal)',
          sources: [
            { id: 'dms', label: 'Document Mgmt (iManage, NetDocs)', base: 210 },
            { id: 'billing', label: 'Billing / Timekeeping', base: 140 },
            { id: 'email', label: 'Email / Communications', base: 180 },
            { id: 'crm', label: 'CRM / Matters', base: 120 },
            { id: 'csv', label: 'CSV / Excel / SFTP drops', base: 60 },
          ],
          batchMs: 760, aiMs: 180,
          roiFactor: 12,
          uplift:

      // ── 6.2) State
      const state = {
        product: 'finex',
        mode: 'unified', // 'cloud' | 'unified'
        volume: 3.0,
        enabled: new Set(),
      };

      // ── 6.3) Helpers
      const $ = sel => document.querySelector(sel);
      const $$ = sel => Array.from(document.querySelectorAll(sel));
      const fmt = n => n.toLocaleString(undefined, { maximumFractionDigits: 0 });
      const fmtMoney = n => n.toLocaleString(undefined, { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });

      // ── 6.4) URL → state and back
      function readUrl(){
        const u = new URL(location.href);
        const p = u.searchParams.get('product');
        const m = u.searchParams.get('mode');
        if (p && PRESETS[p]) state.product = p;
        if (m && (m === 'cloud' || m === 'unified')) state.mode = m;
      }
      function writeUrl(){
        const u = new URL(location.href);
        u.searchParams.set('product', state.product);
        u.searchParams.set('mode', state.mode);
        history.replaceState(null, '', u.toString());
      }

      // ── 6.5) Render source list
      function renderSources(){
        const cfg = PRESETS[state.product];
        const host = $('#source-list');
        host.innerHTML = '';
        state.enabled = new Set(cfg.sources.map(s => s.id)); // default all on
        cfg.sources.forEach(s => {
          const row = document.createElement('div');
          row.className = 'source-item';
          row.innerHTML = `
            <label>
              <input type="checkbox" data-id="${s.id}" checked />
              <span>${s.label}</span>
            </label>
            <span class="badge">~${s.base} rows/s</span>
          `;
          host.appendChild(row);
        });
        host.addEventListener('change', e => {
          const cb = e.target.closest('input[type=checkbox]');
          if (!cb) return;
          if (cb.checked) state.enabled.add(cb.dataset.id); else state.enabled.delete(cb.dataset.id);
          updateKpis();
          drawAllLines();
        }, { once:true });
      }

      // ── 6.6) Metrics calc (toy but consistent, w/ vendor elimination impact)
      function activeVendors(){
        // one vendor per source in the cloud diagram; count only enabled sources
        const cfg = PRESETS[state.product];
        return cfg.sources.filter(s => state.enabled.has(s.id)).length;
      }
      function updateKpis(){
        const cfg = PRESETS[state.product];
        const rows = cfg.sources
          .filter(s => state.enabled.has(s.id))
          .reduce((sum, s) => sum + s.base, 0) * state.volume;
        const throughput = rows; // rows/sec (sim)
        const batch = Math.max(240, cfg.batchMs - (state.mode === 'unified' ? 120 : 0));
        const ai = Math.max(90, cfg.aiMs - (state.mode === 'unified' ? 40 : 0));

        // Vendors & ROI model
        const vendorCount = activeVendors();
        const eliminated = state.mode === 'unified'
          ? Math.max(0, (vendorCount >= 3 ? Math.max(2, vendorCount - 1) : Math.max(0, vendorCount - 1)))
          : 0;
        const vendorCost = vendorCount * cfg.vendorCost;
        const savedVendors = eliminated * cfg.vendorCost;

        const baseSavings = rows * cfg.roiFactor * (state.mode === 'unified' ? 1.9 : 0.9);
        const roiRaw = state.mode === 'unified' ? (baseSavings + savedVendors) : (baseSavings - vendorCost);
        const roi = Math.max(75000, roiRaw); // floor to keep sensible

        $('#kpi-throughput').textContent = `${fmt(throughput)} rows/sec`;
        $('#kpi-batch').textContent = `${fmt(batch)} ms`;
        $('#kpi-ai').textContent = `${fmt(ai)} ms`;
        $('#kpi-roi').textContent = fmtMoney(roi);
      }

      // ── 6.7) Toggle mode → highlight one panel & dim the other
      function setMode(m){
        state.mode = m;
        writeUrl();
        const cloud = $('#panel-cloud');
        const uni = $('#panel-unified');
        const cloudBtn = $('#tab-cloud');
        const uniBtn = $('#tab-unified');
        if (m === 'cloud'){
          cloud.style.opacity = '1'; cloud.style.filter = 'none';
          uni.style.opacity = '.55'; uni.style.filter = 'grayscale(30%)';
          cloudBtn.classList.remove('tabu'); cloudBtn.classList.add('primary'); cloudBtn.setAttribute('aria-selected', 'true');
          uniBtn.classList.remove('primary'); uniBtn.classList.add('tabu'); uniBtn.setAttribute('aria-selected', 'false');
        } else {
          uni.style.opacity = '1'; uni.style.filter = 'none';
          cloud.style.opacity = '.55'; cloud.style.filter = 'grayscale(30%)';
          uniBtn.classList.remove('tabu'); uniBtn.classList.add('primary'); uniBtn.setAttribute('aria-selected', 'true');
          cloudBtn.classList.remove('primary'); cloudBtn.classList.add('tabu'); cloudBtn.setAttribute('aria-selected', 'false');
        }
        drawAllLines();
        updateKpis();
      }

      // ── 6.8) Apply product preset
      function setProduct(p){
        state.product = p;
        $$('.pill').forEach(el => el.classList.toggle('active', el.dataset.preset === p));
        renderSources();
        updateKpis();
        writeUrl();
        setTimeout(drawAllLines, 0); // after layout
      }

      // ── 6.9) SVG helpers (edge-anchored)
      function anchor(el, root, side = 'center'){
        const eb = el.getBoundingClientRect();
        const rb = root.getBoundingClientRect();
        const midY = eb.top - rb.top + eb.height / 2;
        if (side === 'left')  return { x: eb.left - rb.left,           y: midY };
        if (side === 'right') return { x: eb.left - rb.left + eb.width, y: midY };
        if (side === 'top')   return { x: eb.left - rb.left + eb.width/2, y: eb.top - rb.top };
        if (side === 'bottom')return { x: eb.left - rb.left + eb.width/2, y: eb.top - rb.top + eb.height };
        return { x: eb.left - rb.left + eb.width / 2, y: midY };
      }
      function portAlongEdge(el, root, side, index, total){
        // Returns a point along the given edge spread across items
        const eb = el.getBoundingClientRect();
        const rb = root.getBoundingClientRect();
        const t = (index + 1) / (total + 1);
        if (side === 'left')  return { x: eb.left - rb.left, y: eb.top - rb.top + eb.height * t };
        if (side === 'right') return { x: eb.left - rb.left + eb.width, y: eb.top - rb.top + eb.height * t };
        if (side === 'top')   return { x: eb.left - rb.left + eb.width * t, y: eb.top - rb.top };
        if (side === 'bottom')return { x: eb.left - rb.left + eb.width * t, y: eb.top - rb.top + eb.height };
        return anchor(el, root, 'center');
      }
      function drawLine(svg, a, b, color, width){
        const p = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        p.setAttribute('x1', a.x); p.setAttribute('y1', a.y);
        p.setAttribute('x2', b.x); p.setAttribute('y2', b.y);
        p.setAttribute('stroke', color); p.setAttribute('stroke-width', width);
        p.setAttribute('stroke-linecap', 'round');
        svg.appendChild(p);
      }
      function clearSvg(svg){ while (svg.firstChild) svg.removeChild(svg.firstChild); }

      function drawCloud(){
        const stage = $('#stage-cloud');
        const svg = $('#svg-cloud');
        clearSvg(svg);
        svg.setAttribute('viewBox', `0 0 ${stage.clientWidth} ${stage.clientHeight}`);
        svg.setAttribute('width', stage.clientWidth);
        svg.setAttribute('height', stage.clientHeight);

        const srcIds = ['cloud-src-core','cloud-src-loan','cloud-src-cards','cloud-src-crm','cloud-src-csv'];
        const siloIds = ['cloud-silo-1','cloud-silo-2','cloud-silo-3','cloud-silo-4','cloud-silo-5'];
        const hq = $('#cloud-hq');
        const color = getComputedStyle(document.documentElement).getPropertyValue('--vx-danger').trim();

        // sources → matching silos
        for (let i=0;i<srcIds.length;i++){
          const s = $('#'+srcIds[i]);
          const t = $('#'+siloIds[i]);
          drawLine(svg, anchor(s, stage, 'right'), anchor(t, stage, 'left'), color, 2);
        }
        // silos → HQ (spread along HQ's left edge so they never merge)
        const total = siloIds.length;
        siloIds.forEach((id, i) => {
          const from = anchor($('#'+id), stage, 'right');
          const to = portAlongEdge(hq, stage, 'left', i, total);
          drawLine(svg, from, to, color, 2);
        });
      }

      function drawUnified(){
        const stage = $('#stage-unified');
        const svg = $('#svg-unified');
        clearSvg(svg);
        svg.setAttribute('viewBox', `0 0 ${stage.clientWidth} ${stage.clientHeight}`);
        svg.setAttribute('width', stage.clientWidth);
        svg.setAttribute('height', stage.clientHeight);

        const srcIds = ['uni-src-core','uni-src-loan','uni-src-cards','uni-src-crm','uni-src-csv'];
        const vx = $('#uni-veltrax');
        const hq = $('#uni-hq');
        const colorV = getComputedStyle(document.documentElement).getPropertyValue('--vx-primary').trim();
        const colorH = getComputedStyle(document.documentElement).getPropertyValue('--vx-good').trim();

        srcIds.forEach(id => {
          drawLine(svg, anchor($('#'+id), stage, 'right'), anchor(vx, stage, 'left'), colorV, 3);
        });
        drawLine(svg, anchor(vx, stage, 'right'), anchor(hq, stage, 'left'), colorH, 6);
      }

      function drawAllLines(){ drawCloud(); drawUnified(); }

      // ── 6.10) Init
      function init(){
        readUrl();
        // bind UI
        $('#tab-cloud').addEventListener('click', () => setMode('cloud'));
        $('#tab-unified').addEventListener('click', () => setMode('unified'));
        $$('[data-focus]').forEach(btn => btn.addEventListener('click', e => setMode(e.currentTarget.dataset.focus)));
        $('#copy-url').addEventListener('click', () => {
          writeUrl();
          navigator.clipboard.writeText(location.href).then(()=>{
            const b = $('#copy-url');
            b.textContent = 'Copied!';
            setTimeout(()=> b.textContent = 'Copy link', 1200);
          });
        });
        $$('.pill').forEach(p => p.addEventListener('click', e => setProduct(e.currentTarget.dataset.preset)));
        $('#vol').addEventListener('input', e => { state.volume = parseFloat(e.target.value); updateKpis(); });
        // default product & mode
        setProduct(state.product);
        setMode(state.mode);

        // draw lines on load & on resize
        window.addEventListener('resize', drawAllLines);
        setTimeout(drawAllLines, 50);
        setTimeout(drawAllLines, 250);
      }

      document.addEventListener('DOMContentLoaded', init);
    </script>
  </body>
</html>
<!--
  Veltrax — Silos vs Unified Simulator (Full Demo)
  - Product presets: Finex (Banking), Échelon (Retail), Verdict (Legal)
  - Source toggles + volume slider
  - Live metrics: throughput, batch latency, AI latency, projected ROI
  - URL presets: ?product=finex|echelon|verdict&mode=cloud|unified
  - Two detailed SVG panels with dynamic lines — Cloud vs Unified
  - NO tooltips / NO screenshot button (per request)
  - Clean straight lines, nothing cut off; lines auto‑align on resize
  - Accessible, keyboard-friendly
  - Single-file for GitHub Pages
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ─────────────────────────── 1) META & TOKENS ─────────────────────────── -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Veltrax — From Data Silos to Unified Intelligence</title>

    <style>
      /* ── 1.1) Color Tokens (Veltrax UI Spec v2) */
      :root {
        --vx-primary: #4c8dff;
        --vx-bg: #131417;
        --vx-surface: #1b1d23;
        --vx-surface-2: #20232b;
        --vx-border: #2c2f36;
        --vx-text: #e6e7eb;
        --vx-muted: #7f8696;
        --vx-danger: #ff453a;
        --vx-good: #4cff88;
        --vx-ring: rgba(76, 141, 255, 0.45);
      }

      /* ── 1.2) Resets */
      *, *::before, *::after { box-sizing: border-box; }
      html, body { height: 100%; }
      body {
        margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
        background: radial-gradient(1000px 400px at 50% -200px, rgba(111,66,193,.25), transparent 60%) , var(--vx-bg);
        color: var(--vx-text);
      }
      a { color: var(--vx-primary); text-decoration: none; }
      a:hover { text-decoration: underline; }
      button { font: inherit; color: inherit; background: none; border: none; cursor: pointer; }
      input[type="range"] { width: 100%; }

      /* ── 1.3) Utilities */
      .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
      .row { display: grid; gap: 16px; }
      @media (min-width: 900px){ .row.cols-2 { grid-template-columns: 1fr 1fr; } }
      .card {
        background: linear-gradient(180deg, var(--vx-surface), var(--vx-surface-2));
        border: 1px solid var(--vx-border);
        border-radius: 16px; padding: 20px; box-shadow: 0 1px 0 rgba(0,0,0,.25);
      }
      .muted { color: var(--vx-muted); }
      .kpi { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
      .pill { display:inline-flex; align-items:center; gap:8px; border:1px solid var(--vx-border); padding:6px 10px; border-radius:999px; background: #181a21; }
      .pill.active { border-color: var(--vx-primary); box-shadow: 0 0 0 3px var(--vx-ring); }
      .btn {
        display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px;
        border:1px solid var(--vx-border); background:#16181f; transition: 120ms ease-out;
      }
      .btn:hover { border-color: var(--vx-primary); box-shadow: 0 0 0 3px var(--vx-ring); }
      .btn.primary { background: var(--vx-primary); color: #0d1424; border-color: transparent; }
      .btn.tabu { background:#191c23; color: var(--vx-muted); }

      /* ── 1.4) Hero */
      .hero { padding: 36px 0 8px; }
      .hero h1 { font-size: 40px; line-height: 1.15; margin: 8px 0 6px; }
      .hero p { color: var(--vx-muted); }

      /* ── 1.5) Data Source checklist */
      .source-list { display:flex; flex-direction:column; gap:10px; }
      .source-item { display:flex; align-items:center; justify-content:space-between; gap:14px; background:#171a21; padding:10px 12px; border-radius:12px; border:1px solid var(--vx-border); }
      .source-item label { display:flex; align-items:center; gap:10px; cursor:pointer; }
      .badge { color: var(--vx-muted); font-size:12px; }

      /* ── 1.6) KPIs */
      .kpi-grid { display:grid; grid-template-columns: repeat(4, 1fr); gap:12px; }
      @media (max-width: 900px){ .kpi-grid { grid-template-columns:1fr; } }
      .kpi-card { background:#16181f; border:1px solid var(--vx-border); border-radius:12px; padding:14px; }
      .kpi-label { color: var(--vx-muted); font-size:12px; margin-bottom:6px; }
      .kpi-value { font-size:18px; font-weight:600; }

      /* ── 1.7) Dual architecture panels */
      .dual { display:grid; gap:16px; }
      @media (min-width: 1100px){ .dual { grid-template-columns: 1fr 1fr; } }
      .panel { position:relative; }
      .panel header { display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
      .panel header h3 { margin:0; font-size:16px; }
      .stage { position:relative; background: #0f1219; border:1px solid var(--vx-border); border-radius:16px; height:420px; padding:20px; overflow:hidden; }
      .legend { display:flex; gap:10px; position:absolute; bottom:14px; left:16px; font-size:11px; color:var(--vx-muted); }
      .legend .dot { width:10px; height:10px; border-radius:50%; display:inline-block; }
      .stage svg { position:absolute; inset:0; pointer-events:none; overflow:visible; z-index:0; }
      .overlay { position:absolute; z-index:2; }

      /* ── 1.8) Blocks & labels inside SVG areas */
      .chip { padding:8px 12px; border-radius:10px; border:1px solid var(--vx-border); background:#161a22; }
      .chip.light { background:#1b1f27; color:#cfd2da; }
      .chip.bad { border-color: rgba(255,69,58,.5); }
      .chip.good { border-color: rgba(76,255,136,.5); }

      /* ── 1.9) Footer */
      footer { border-top:1px solid var(--vx-border); margin-top:40px; padding:24px 0 48px; color:var(--vx-muted); }

      /* ── 1.10) Visually hidden (a11y) */
      .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    </style>
  </head>

  <body>
    <!-- ─────────────────────────── 2) HERO & CONTROLS ─────────────────────────── -->
    <header class="container hero">
      <div style="display:flex; align-items:center; gap:10px;">
        <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true">
          <rect x="6" y="10" width="52" height="12" rx="6" fill="#ffffff" />
          <rect x="6" y="30" width="42" height="12" rx="6" fill="#ffffff" />
          <rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1" />
        </svg>
        <span class="muted" style="letter-spacing:.2em; font-size:11px;">VELTRAX</span>
      </div>
      <h1>From Data Silos to Unified Intelligence — Powered by Veltrax</h1>
      <p>Unify every source into one secure, local model. See how the architecture flips from fragmented risk to real-time decisions.</p>

      <div class="row" style="margin-top:12px; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;">
        <div>
          <div role="tablist" aria-label="View">
            <button id="tab-cloud" class="btn tabu" data-mode="cloud" role="tab" aria-selected="false">Cloud Providers</button>
            <button id="tab-unified" class="btn" data-mode="unified" role="tab" aria-selected="true" style="margin-left:6px;">Veltrax Unified</button>
          </div>
          <div class="muted" style="font-size:12px; margin-top:6px;">Click to focus a panel. Both detailed sections are below.</div>
        </div>

        <div style="justify-self:center; display:flex; gap:8px; align-items:center;">
          <span class="muted" style="font-size:12px;">Preset:</span>
          <button class="pill" data-preset="finex">Finex (Banking)</button>
          <button class="pill" data-preset="echelon">Échelon (Retail)</button>
          <button class="pill" data-preset="verdict">Verdict (Legal)</button>
        </div>

        <div style="justify-self:end; display:flex; align-items:center; gap:10px;">
          <span class="muted" style="font-size:12px;">Share state</span>
          <button id="copy-url" class="btn">Copy link</button>
        </div>
      </div>
    </header>

    <!-- ─────────────────────────── 3) SOURCE PANEL + METRICS ─────────────────────────── -->
    <main class="container row cols-2" style="margin-top:20px; align-items:start;">
      <!-- 3.1 Sources -->
      <section class="card" aria-labelledby="sources-title">
        <h2 id="sources-title" style="margin:0 0 8px; font-size:16px;">Data Source Selector</h2>
        <p class="muted" style="margin-top:2px; font-size:12px;">Pick sources for the selected product. Veltrax will normalize them to a unified model.</p>

        <div class="source-list" id="source-list"><!-- populated by JS --></div>

        <div style="margin-top:12px;">
          <label for="vol" class="muted" style="display:block; font-size:12px; margin-bottom:6px;">Daily volume multiplier</label>
          <input id="vol" type="range" min="0.5" max="5" step="0.1" value="3" />
          <div class="muted" style="font-size:11px;">Simulates more or fewer events per day across selected sources.</div>
        </div>

        <div class="card" style="margin-top:14px;">
          <h3 style="margin:0 0 8px; font-size:14px;">Why this matters</h3>
          <ul style="margin:0; padding-left:18px; color:var(--vx-muted); font-size:13px;">
